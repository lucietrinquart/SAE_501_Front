<div class="p-6 bg-fond_page">
  <!-- Navigation des semestres style tab -->
  <nav class="mb-8 text-blanc">
    <div class="flex items-center gap-3">
      <button
        (click)="filterBySemester(null)"
        [class.border-b-2]="selectedSemester === null"
        class="px-6 py-3 text-sm font-medium transition-colors duration-200 bg-fond_section1 rounded hover:bg-fond_section2">
        Tous
      </button>
      
      <button
        *ngFor="let semester of semesters"
        (click)="filterBySemester(semester)"
        [class.border-b-2]="selectedSemester === semester"
        class="px-6 py-3 text-sm font-medium transition-colors duration-200 bg-fond_section1 rounded hover:bg-fond_section2">
        S{{ semester }}
      </button>

      <div class="ml-auto flex items-center gap-4">
        <button class="px-4 py-2 rounded font-medium">
          Ajouter une ressource
        </button>
        <button class="px-3 py-2 rounded">
          Filtrer
        </button>
      </div>
    </div>
  </nav>

  <!-- Message si aucune ressource -->
  <div *ngIf="filteredResources.length === 0" class="text-center py-8">
    Aucune ressource trouvée pour ce semestre.
  </div>

  <!-- Grid des ressources -->
  <div class="container mx-auto">
    <div class="grid grid-cols-2 gap-6 max-w-5xl mx-auto">
      <!-- Card pour chaque ressource -->
      <div *ngFor="let item of filteredResources"
           class="bg-fond_section1 rounded-lg shadow-md p-6">
        <!-- En-tête avec le code et type de ressource -->
        <div class="flex justify-between items-center mb-6">
          <div class="flex items-center gap-2">
            <input *ngIf="resourceForms[item.id].get('name')" 
                   [formControl]="$any(resourceForms[item.id].get('name'))" 
                   class="font-medium text-lg focus:outline-none border-b border-transparent focus:border-blue-500 rounded">
          </div>
          <span class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm">
            {{ getResourceTypeName(item.resource_type_id) }}
          </span>
        </div>

        <form [formGroup]="resourceForms[item.id]">
          <!-- Formation si existe -->
          <div *ngIf="item.course" class="mb-4">
            <label class="text-gray-600 font-medium block mb-2">Formation</label>
            <p class="text-gray-800">{{ item.course }}</p>
          </div>

          <!-- Description -->
          <div class="mb-4">
            <label class="text-gray-600 font-medium block mb-2">Description</label>
            <textarea formControlName="description"
                      class="w-full p-2 border rounded-lg resize-none focus:outline-none focus:border-blue-500"
                      rows="2"></textarea>
          </div>

          <!-- Semestre -->
          <div class="mb-4">
            <label class="text-gray-600 font-medium block mb-2">Semestre</label>
            <select formControlName="semester_id"
                    class="w-full p-2 border rounded-lg focus:outline-none focus:border-blue-500">
              <option *ngFor="let sem of semesters" [value]="sem">Semestre {{ sem }}</option>
            </select>
          </div>

          <!-- Volumes horaires -->
          <div>
            <label class="text-gray-600 font-medium block mb-2">Volumes horaires</label>
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="text-sm text-gray-500 block mb-1">Volume national</label>
                <input type="number" 
                       formControlName="vol_nat"
                       class="w-full p-2 border rounded-lg focus:outline-none focus:border-blue-500">
              </div>
              <div>
                <label class="text-sm text-gray-500 block mb-1">Volume national TP</label>
                <input type="number" 
                       formControlName="vol_nat_tp"
                       class="w-full p-2 border rounded-lg focus:outline-none focus:border-blue-500">
              </div>
              <div *ngIf="item.vol_e !== undefined">
                <label class="text-sm text-gray-500 block mb-1">Volume encadré</label>
                <input type="number" 
                       formControlName="vol_e"
                       class="w-full p-2 border rounded-lg focus:outline-none focus:border-blue-500">
              </div>
              <div *ngIf="item.vol_ne !== undefined">
                <label class="text-sm text-gray-500 block mb-1">Volume non encadré</label>
                <input type="number" 
                       formControlName="vol_ne"
                       class="w-full p-2 border rounded-lg focus:outline-none focus:border-blue-500">
              </div>
            </div>
          </div>

          <!-- Bouton de confirmation -->
          <div class="flex justify-end mt-6">
            <button 
              (click)="saveChanges(item)"
              class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors duration-200">
              Confirmer les modifications
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>